<!doctype html>
<html lang="{{language}}">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="{{description}}" />
    <meta name="generator" content="plaparsi" />
    <title>{{title}}</title>

    <!-- Open Graph -->
    <meta property="og:title" content="{{title}}" />
    <meta property="og:description" content="{{description}}" />
    <meta property="og:type" content="website" />
    {{#logo}}
    <meta property="og:image" content="{{logo}}" />
    {{/logo}} {{#partnerUrl}}
    <meta property="og:url" content="{{partnerUrl}}" />
    {{/partnerUrl}}

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="{{title}}" />
    <meta name="twitter:description" content="{{description}}" />
    {{#logo}}
    <meta name="twitter:image" content="{{logo}}" />
    {{/logo}}

    <style>
      {{{styles}}}
    </style>
  </head>
  <body>
    <a href="#main" class="skip-link">Skip to main content</a>

    <header class="header">
      <div class="header__inner">
        {{#logo}}
        <img src="{{logo}}" alt="" class="header__logo" />
        {{/logo}}
        <div class="header__text">
          <h1 class="header__title">{{partnerName}}</h1>
          {{#summary}}
          <p class="header__summary">{{summary}}</p>
          {{/summary}} {{#socialLinks}}
          <nav aria-label="Social links">
            <ul class="social-links">
              {{#links}}
              <li>{{.}}</li>
              {{/links}}
            </ul>
          </nav>
          {{/socialLinks}}
        </div>
      </div>
    </header>

    <main id="main" class="main">
      {{#about}}
      <section class="about">
        <h2 class="about__title">About</h2>
        <div class="about__content">{{{about}}}</div>
      </section>
      {{/about}}

      <section class="events">
        <h2 class="events__title">Upcoming Events</h2>
        {{#hasEvents}}
        <ul class="events__list">
          {{#events}}
          <li class="event">
            <article class="event__inner">
              <h3 class="event__title">{{name}}</h3>
              <p class="event__time">
                <time datetime="{{startDate}}">{{timeFormatted}}</time>
              </p>
              {{#summary}}
              <p class="event__summary">{{summary}}</p>
              {{/summary}} {{#description}}
              <div class="event__description">{{{description}}}</div>
              {{/description}} {{#location}}
              <p class="event__location">{{location}}</p>
              {{/location}} {{#publisherUrl}}
              <p class="event__link">
                <a href="{{publisherUrl}}">More details</a>
              </p>
              {{/publisherUrl}}
            </article>
          </li>
          {{/events}}
        </ul>
        {{/hasEvents}} {{^hasEvents}}
        <p class="events__empty">
          No upcoming events at the moment. Check back soon!
        </p>
        {{/hasEvents}}
      </section>
    </main>

    <footer class="footer">
      <p class="footer__text">
        Data from
        <a href="https://placecal.org/partners/{{partnerId}}">PlaceCal</a>. Last
        updated:
        <time datetime="{{buildDate}}">{{buildDateFormatted}}</time>
      </p>
      {{#partnerUrl}}
      <p class="footer__links">
        <a href="{{partnerUrl}}">Visit {{partnerName}}</a>
      </p>
      {{/partnerUrl}}
      <p class="footer__text">
        Icons by <a href="https://lucide.dev">Lucide</a>
      </p>
    </footer>

    <button class="theme-toggle" aria-label="Toggle dark mode">
      <svg
        class="theme-toggle__icon--dark"
        xmlns="http://www.w3.org/2000/svg"
        width="20"
        height="20"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        aria-hidden="true"
      >
        <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z" />
      </svg>
      <svg
        class="theme-toggle__icon--light"
        xmlns="http://www.w3.org/2000/svg"
        width="20"
        height="20"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        aria-hidden="true"
      >
        <circle cx="12" cy="12" r="4" />
        <path d="M12 2v2" />
        <path d="M12 20v2" />
        <path d="m4.93 4.93 1.41 1.41" />
        <path d="m17.66 17.66 1.41 1.41" />
        <path d="M2 12h2" />
        <path d="M20 12h2" />
        <path d="m6.34 17.66-1.41 1.41" />
        <path d="m19.07 4.93-1.41 1.41" />
      </svg>
    </button>

    <script>
      (function () {
        const toggle = document.querySelector(".theme-toggle");
        const root = document.documentElement;

        // Check for saved preference or use system default
        const saved = localStorage.getItem("theme");
        if (saved) {
          root.setAttribute("data-theme", saved);
        }

        toggle.addEventListener("click", function () {
          const current = root.getAttribute("data-theme");
          const prefersDark = window.matchMedia(
            "(prefers-color-scheme: dark)",
          ).matches;

          let newTheme;
          if (current === "dark" || (!current && prefersDark)) {
            newTheme = "light";
          } else {
            newTheme = "dark";
          }

          root.setAttribute("data-theme", newTheme);
          localStorage.setItem("theme", newTheme);
        });
      })();
    </script>
  </body>
</html>
